CREATE SCHEMA `tbLojaSapato` ;
USE `tbLojaSapato` ;

CREATE TABLE  `tbLojaSapato`.`tbPessoa` (
  `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `nome` VARCHAR(80) NOT NULL,
  `cpf` VARCHAR(15) NULL,
  `endereco` VARCHAR(80) NULL);

CREATE TABLE `tbLojaSapato`.`tbFuncionario` (
  `id` INT NOT NULL  PRIMARY KEY AUTO_INCREMENT,
  `carteira_trabalho` VARCHAR(45) NOT NULL,
  `turno_trabalho` VARCHAR(20) NOT NULL,
  `salario` DECIMAL(10,2) NOT NULL,
  `cargo` VARCHAR(55) NOT NULL,
  `id_pessoa` INT NOT NULL,
  `tbPessoa_id` INT NOT NULL,
    FOREIGN KEY (`tbPessoa_id`)
    REFERENCES `tbLojaSapato`.`tbPessoa` (`id`));
  
CREATE TABLE  `tbLojaSapato`.`tbProduto` (
  `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `valor` DECIMAL(10,2) NOT NULL,
  `qntd_estoque` INT NOT NULL,
  `tbProdutocol` VARCHAR(45) NOT NULL);

CREATE TABLE  `tbLojaSapato`.`tbCliente` (
  `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `data_cadastro` DATE NOT NULL,
  `limite_cred` DECIMAL(10,2) NULL,
  `id_pessoa` INT NOT NULL,
  `tbPessoa_id` INT NOT NULL,
    FOREIGN KEY (`tbPessoa_id`)
    REFERENCES `tbLojaSapato`.`tbPessoa` (`id`));

CREATE TABLE  `tbLojaSapato`.`tbVenda` (
  `id` INT NOT NULL   PRIMARY KEY  AUTO_INCREMENT,
  `data_venda` DATE NOT NULL,
  `data_receb` DATE NOT NULL,
  `forma_pagamento` VARCHAR(45) NOT NULL,
  `id_cliente` INT NOT NULL,
  `tbCliente_id` INT NOT NULL,
    FOREIGN KEY (`tbCliente_id`)
    REFERENCES `tbLojaSapato`.`tbCliente` (`id`));

CREATE TABLE `tbLojaSapato`.`Itens_venda` (
  `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `id_prod` INT NOT NULL,
  `id_venda` INT NOT NULL,
  `tbVenda_id` INT NOT NULL,
  `tbProduto_id` INT NOT NULL,
    FOREIGN KEY (`tbVenda_id`)
    REFERENCES `tbLojaSapato`.`tbVenda` (`id`),
    FOREIGN KEY (`tbProduto_id`)
    REFERENCES `tbLojaSapato`.`tbProduto` (`id`));

CREATE TABLE  `tbLojaSapato`.`Registro_venda` (
  `id` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `id_func` INT NOT NULL,
  `id_venda` INT NOT NULL,
  `tbFuncionario_id` INT NOT NULL,
  `tbVenda_id` INT NOT NULL,
    FOREIGN KEY (`tbFuncionario_id`)
    REFERENCES `tbLojaSapato`.`tbFuncionario` (`id`),
    FOREIGN KEY (`tbVenda_id`)
    REFERENCES `tbLojaSapato`.`tbVenda` (`id`));
